<?php

/*
	|--------------------------------------------------------------------------
	| System Directory & URL
	|--------------------------------------------------------------------------
	|
	| The system directory and URL are declare to support functionality of the
	| system.
	|
	*/

$fynxDirectory = str_replace("\\", "/", dirname(__FILE__)) . "/";
$getURL = (isset($_SERVER['HTTPS']) && $_SERVER['HTTPS'] === 'on') ? "https://" : "http://";
$getURL .= $_SERVER['HTTP_HOST'] . request_url($_SERVER['REQUEST_URI'] . 'public/');

// The Fynx Framework root directory is declared
define('FYNX_DIR', $fynxDirectory, TRUE);

// The Application URL is declared
define('FYNX_URL', $getURL, TRUE);

// require APP config file
require_once FYNX_DIR . 'system/configs/app.cfg';

// require/Load autoloader object
require_once FYNX_DIR . 'system/autoloader.php';

// load all default files and dependancies
$autoLoader->load_files();
// $autoLoader->set_autoload_config();
// $autoLoader->load_files( FYNX_URL . 'public/system/' );

// require/load URL Mapper object
require_once FYNX_DIR . 'system/router.php';

// function to filter root FYNX url
function request_url($splitURI)
{
	$requestURI = '';
	$i = 0;
	$uriArray = explode('/', $splitURI);
	while ($uriArray[$i] != 'public') {
		$requestURI .= $uriArray[$i] . '/';
		$i++;
	}
	return $requestURI;
}